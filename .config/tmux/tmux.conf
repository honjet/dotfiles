# ====================================
# åŸºæœ¬è¨­å®š
# ====================================

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚·ã‚§ãƒ«
if-shell -b '[ "$(uname)" = "Linux" ]' {
  set-option -g default-shell "/home/linuxbrew/.linuxbrew/bin/fish"
}
if-shell -b '[ "$(uname)" = "Darwin" ]' {
  set-option -g default-shell "/opt/homebrew/bin/fish"
}

# ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å±¥æ­´ã®é•·ã•
set-option -g history-limit 100000

# tmuxã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆãŒé€ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
set -g focus-events on

# ã‚­ãƒ¼ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ã®ãƒ‡ã‚£ãƒ¬ã‚¤ã‚’æ¸›ã‚‰ã™
set -sg escape-time 1

# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1ã‹ã‚‰å§‹ã‚ã‚‹
set -g base-index 1

# ãƒšã‚¤ãƒ³ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1ã‹ã‚‰å§‹ã‚ã‚‹
setw -g pane-base-index 1

# ãƒã‚¦ã‚¹æ“ä½œã‚’æœ‰åŠ¹ã«ã™ã‚‹
setw -g mouse on

# viã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹
setw -g mode-keys vi

# =====================================
# ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰è¨­å®š
# =====================================
# prefixã‚­ãƒ¼ã‚’å¤‰æ›´ã™ã‚‹
# set -g prefix C-t
set -g prefix C-Space
bind Space send-prefix
#
# # C-bã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’è§£é™¤ã™ã‚‹
unbind C-b
#
# # prefix2å›æŠ¼ã™ã¨muxå†…ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«é€ã‚‹
bind C-Space send-prefix
# bind C-t send-prefix

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹
bind r source-file ~/.config/tmux/tmux.conf \; display "Reloaded!"

# | ã§ãƒšã‚¤ãƒ³ã‚’ç¸¦ã«åˆ†å‰²ã™ã‚‹
bind | split-window -h

# - ã§ãƒšã‚¤ãƒ³ã‚’æ¨ªã«åˆ†å‰²ã™ã‚‹
bind - split-window -v

# ctrl tab ã§ windowç§»å‹•
bind -n C-Tab next-window
bind -n C-S-Tab previous-window
bind -n S-left previous-window
bind -n S-right next-window

# ãƒšã‚¤ãƒ³ç§»å‹•
bind -n S-up select-pane -t :.-
bind -n S-down select-pane -t :.+

# ãƒšã‚¤ãƒ³ã®ã‚µã‚¤ã‚ºå¤‰æ›´
bind -n M-left resize-pane -L 5
bind -n M-right resize-pane -R 5
bind -n M-up resize-pane -U 5
bind -n M-down resize-pane -D 5

# Vimã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã§ãƒšã‚¤ãƒ³ã‚’ç§»å‹•ã™ã‚‹
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Vimã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã§ãƒšã‚¤ãƒ³ã‚’ãƒªã‚µã‚¤ã‚ºã™ã‚‹
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰å…±æœ‰ã‚’æœ‰åŠ¹ã«ã™ã‚‹
# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®æ“ä½œã‚’vié¢¨ã«è¨­å®šã™ã‚‹
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection
bind-key -T copy-mode-vi Enter send-keys -X copy-selection

# OS ãŒ Linux ã®æ™‚ã¯ xsel ã‚’ä½¿ã†
if-shell -b '[ "$(uname)" = "Linux" ]' {
  set -s copy-command "xsel --clipboard --input"
  display "using xsel as copy-command"
}

# OS ãŒ Darwin ã®æ™‚ã¯ pbcopy ã‚’ä½¿ã†
if-shell -b '[ "$(uname)" = "Darwin" ]' {
  set -s copy-command "pbcopy"
  display "using pbcopy as copy-command"
}

# ==========================================
# ãƒ†ãƒ¼ãƒ
# ==========================================

# 256è‰²ç«¯æœ«ã‚’ä½¿ç”¨ã™ã‚‹
# set -g default-terminal "tmux-256color"
#set-option -g default-terminal "xterm-256color"
set-option -g default-terminal "screen-256color"
set -ag terminal-overrides ",tmux-256color:RGB"
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®è‰²ã‚’è¨­å®šã™ã‚‹
# set -g status-bg color60
set -g status-bg color237
set -g status-fg color252
# setw -g window-status-current-style bg=color189,fg=color16
setw -g window-status-current-style bg=color23,fg=color195

# ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒšã‚¤ãƒ³ã‚’ç›®ç«‹ãŸã›ã‚‹
set -g pane-active-border-style fg=color99

# ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã®é–“éš”ã‚’è¨­å®šã™ã‚‹(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ 15ç§’)
set -g status-interval 60
# ãƒ´ã‚£ã‚¸ãƒ¥ã‚¢ãƒ«ãƒãƒ¼ãƒ†ã‚£ãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹
setw -g monitor-activity on
set -g visual-activity on
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã‚’ä¸Šéƒ¨ã«è¡¨ç¤ºã™ã‚‹
set -g status-position top

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã®å·¦ã«è¡¨ç¤ºã™ã‚‹ã‚‚ã®
set -g status-left-length 40
# set -g status-left-style bg=color237,fg=color189
set -g status-left-style bg=color237,fg=color252
set -g status-left "#(whoami)@#(hostname)<#S>î‚± "

# window-status
set-window-option -g window-status-format "[#I] #W "
set-window-option -g window-status-current-format " << [#I] #W >> "

# right
# set -g status-right-style fg=color189
set -g status-right-style fg=color195
set -g status-right "%Y-%m-%d (%a) %H:%M "

bind-key    -T root         MouseDown3Pane       if-shell -F -t = "#{||:#{mouse_any_flag},#{&&:#{pane_in_mode},#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}}}" "select-pane -t= ; send -M" "display-menu -t= -xM -yM -T \"#[align=centre]#{pane_index} (#{pane_id})\" \
\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},ä¸€ç•ªä¸Šã«ç§»å‹•ã™ã‚‹,}\" < \"send -X history-top\" \
\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},ä¸€ç•ªä¸‹ã«ç§»å‹•ã™ã‚‹,}\" > \"send -X history-bottom\" \
'' \
\"#{?mouse_word,#[underscore]#{=/9/...:mouse_word}#[none]ã‚’æ¤œç´¢ã™ã‚‹,}\" C-r \"if -F \\\"#{?#{m/r:(copy|view)-mode,#{pane_mode}},0,1}\\\" \\\"copy-mode -t=\\\" ; send -Xt= search-backward \\\"#{q:mouse_word}\\\"\" \
\"#{?mouse_word,#[underscore]#{=/9/...:mouse_word}#[none]ã¨å…¥åŠ›ã™ã‚‹,}\" C-y \"copy-mode -q ; send-keys -l -- \\\"#{q:mouse_word}\\\"\" \
\"#{?mouse_word,#[underscore]#{=/9/...:mouse_word}#[none]ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹,}\" c \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_word}\\\"\" \
\"#{?mouse_line,1è¡Œã‚³ãƒ”ãƒ¼ã™ã‚‹,}\" l \"copy-mode -q ; set-buffer -- \\\"#{q:mouse_line}\\\"\" \
'' \
\"ğŸ»ãƒšã‚¤ãƒ³ã‚’æ¨ªã«å¢—ã‚„ã™\" h \"split-window -h\" \
\"ğŸ£ãƒšã‚¤ãƒ³ã‚’ç¸¦ã«å¢—ã‚„ã™\" v \"split-window -v\" \
'' \
\"#{?#{>:#{window_panes},1},,-}ğŸ‘†ãƒšã‚¤ãƒ³ã‚’ä¸Šã¨äº¤æ›ã™ã‚‹\" u \"swap-pane -U\" \
\"#{?#{>:#{window_panes},1},,-}ğŸ‘‡ãƒšã‚¤ãƒ³ã‚’ä¸‹ã¨äº¤æ›ã™ã‚‹\" d \"swap-pane -D\" \
\"#{?pane_marked_set,,-}âœ…ãƒãƒ¼ã‚¯ä»˜ããƒšã‚¤ãƒ³ã¨å…¥ã‚Œæ›¿ãˆã‚‹\" s swap-pane \
'' \
âŒãƒšã‚¤ãƒ³ã‚’é–‰ã˜ã‚‹ X kill-pane \
ğŸ“–ãƒšã‚¤ãƒ³ã‚’åˆæœŸåŒ–ã™ã‚‹ R \"respawn-pane -k\" \
\"#{?pane_marked,ğŸŸ©ãƒãƒ¼ã‚¯ã‚’å¤–ã™,âœ…ãƒãƒ¼ã‚¯ã‚’ä»˜ã‘ã‚‹}\" m \"select-pane -m\" \
\"#{?#{>:#{window_panes},1},,-}#{?window_zoomed_flag,ğŸŒ±æœ€å¤§åŒ–ã‚’è§£é™¤ã™ã‚‹,ğŸŒ³æœ€å¤§åŒ–ã™ã‚‹}\" z \"resize-pane -Z\""

